<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Portal My Projects Template -->
    <template id="portal_my_projects" name="My Projects">
        <t t-call="portal.portal_layout">
            <t t-set="breadcrumbs_searchbar" t-value="True"/>
            <t t-call="portal.portal_searchbar">
                <t t-set="title">Projects</t>
            </t>
            <t t-if="not projects">
                <div class="alert alert-info">
                    No projects found.
                </div>
            </t>
            <t t-if="projects" t-call="portal.portal_table">
                <thead>
                    <tr class="active">
                        <th>Project</th>
                        <th>Client</th>
                        <th>Status</th>
                        <th>Progress</th>
                        <th>Deadline</th>
                    </tr>
                </thead>
                <tbody>
                    <tr t-foreach="projects" t-as="project">
                        <td>
                            <a t-attf-href="/my/project/#{project.id}">
                                <t t-esc="project.name"/>
                            </a>
                        </td>
                        <td><span t-esc="project.partner_id.name"/></td>
                        <td>
                            <span class="badge badge-pill badge-info" t-esc="project.state"/>
                        </td>
                        <td>
                            <div class="progress">
                                <div class="progress-bar" role="progressbar"
                                     t-attf-style="width: #{project.progress}%">
                                    <t t-esc="project.progress"/>%
                                </div>
                            </div>
                        </td>
                        <td><span t-esc="project.deadline"/></td>
                    </tr>
                </tbody>
            </t>
        </t>
    </template>

    <!-- Portal My Project Template -->
    <template id="portal_my_project" name="My Project">
        <t t-call="portal.portal_layout">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <h1><t t-esc="project.name"/></h1>
                        <p class="text-muted"><t t-esc="project.description"/></p>

                        <div class="row">
                            <div class="col-md-6">
                                <h3>Project Details</h3>
                                <table class="table">
                                    <tr>
                                        <td><strong>Project Code:</strong></td>
                                        <td><t t-esc="project.code"/></td>
                                    </tr>
                                    <tr>
                                        <td><strong>Client:</strong></td>
                                        <td><t t-esc="project.partner_id.name"/></td>
                                    </tr>
                                    <tr>
                                        <td><strong>Status:</strong></td>
                                        <td><span class="badge badge-info" t-esc="project.state"/></td>
                                    </tr>
                                    <tr>
                                        <td><strong>Progress:</strong></td>
                                        <td>
                                            <div class="progress">
                                                <div class="progress-bar" role="progressbar"
                                                     t-attf-style="width: #{project.progress}%">
                                                    <t t-esc="project.progress"/>%
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><strong>Deadline:</strong></td>
                                        <td><t t-esc="project.deadline"/></td>
                                    </tr>
                                </table>
                            </div>
                            <div class="col-md-6">
                                <h3>Financial Information</h3>
                                <table class="table">
                                    <tr>
                                        <td><strong>Budget:</strong></td>
                                        <td><t t-esc="project.budget"/></td>
                                    </tr>
                                    <tr>
                                        <td><strong>Estimated Cost:</strong></td>
                                        <td><t t-esc="project.estimated_cost"/></td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </t>
    </template>

    <!-- Portal My Drawings Template -->
    <template id="portal_my_drawings" name="My Drawings">
        <t t-call="portal.portal_layout">
            <div class="container">
                <h1>Project Drawings</h1>
                <t t-if="not drawings">
                    <div class="alert alert-info">
                        No drawings found.
                    </div>
                </t>
                <t t-if="drawings">
                    <div class="row">
                        <t t-foreach="drawings" t-as="drawing">
                            <div class="col-md-4">
                                <div class="card mb-3">
                                    <div class="card-body">
                                        <h5 class="card-title"><t t-esc="drawing.name"/></h5>
                                        <p class="card-text">
                                            <strong>Type:</strong> <t t-esc="drawing.drawing_type"/><br/>
                                            <strong>Status:</strong> <span class="badge badge-info" t-esc="drawing.state"/><br/>
                                            <strong>Revision:</strong> <t t-esc="drawing.revision"/>
                                        </p>
                                        <a t-attf-href="/my/drawing/#{drawing.id}" class="btn btn-primary">View Details</a>
                                    </div>
                                </div>
                            </div>
                        </t>
                    </div>
                </t>
            </div>
        </t>
    </template>

    <!-- Portal My Drawing Template -->
    <template id="portal_my_drawing" name="My Drawing">
        <t t-call="portal.portal_layout">
            <div class="container">
                <h1><t t-esc="drawing.name"/></h1>
                <div class="row">
                    <div class="col-md-8">
                        <table class="table">
                            <tr>
                                <td><strong>Drawing Code:</strong></td>
                                <td><t t-esc="drawing.code"/></td>
                            </tr>
                            <tr>
                                <td><strong>Type:</strong></td>
                                <td><t t-esc="drawing.drawing_type"/></td>
                            </tr>
                            <tr>
                                <td><strong>Status:</strong></td>
                                <td><span class="badge badge-info" t-esc="drawing.state"/></td>
                            </tr>
                            <tr>
                                <td><strong>Revision:</strong></td>
                                <td><t t-esc="drawing.revision"/></td>
                            </tr>
                            <tr>
                                <td><strong>Scale:</strong></td>
                                <td><t t-esc="drawing.scale"/></td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </t>
    </template>

    <!-- Portal My Documents Template -->
    <template id="portal_my_documents" name="My Documents">
        <t t-call="portal.portal_layout">
            <div class="container">
                <h1>Project Documents</h1>
                <t t-if="not documents">
                    <div class="alert alert-info">
                        No documents found.
                    </div>
                </t>
                <t t-if="documents">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Document</th>
                                <th>Type</th>
                                <th>Date</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr t-foreach="documents" t-as="document">
                                <td><t t-esc="document.name"/></td>
                                <td><t t-esc="document.document_type"/></td>
                                <td><t t-esc="document.document_date"/></td>
                                <td><span class="badge badge-info" t-esc="document.state"/></td>
                                <td>
                                    <t t-if="document.client_downloadable">
                                        <a t-attf-href="/web/content/architect.document/#{document.id}/file_data/#{document.file_name}"
                                           class="btn btn-sm btn-primary">Download</a>
                                    </t>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </t>
            </div>
        </t>
    </template>

    <!-- Portal My Compliance Template -->
    <template id="portal_my_compliance" name="My Compliance">
        <t t-call="portal.portal_layout">
            <div class="container">
                <h1>Compliance Status</h1>
                <t t-if="not compliance_items">
                    <div class="alert alert-info">
                        No compliance items found.
                    </div>
                </t>
                <t t-if="compliance_items">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Compliance Item</th>
                                <th>Category</th>
                                <th>Status</th>
                                <th>Deadline</th>
                                <th>Progress</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr t-foreach="compliance_items" t-as="item">
                                <td><t t-esc="item.name"/></td>
                                <td><t t-esc="item.category"/></td>
                                <td>
                                    <span t-attf-class="badge badge-#{item.state == 'approved' and 'success' or item.state == 'rejected' and 'danger' or 'info'}"
                                          t-esc="item.state"/>
                                </td>
                                <td><t t-esc="item.deadline"/></td>
                                <td>
                                    <div class="progress">
                                        <div class="progress-bar" role="progressbar"
                                             t-attf-style="width: #{item.progress}%">
                                            <t t-esc="item.progress"/>%
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </t>
            </div>
        </t>
    </template>
</odoo>